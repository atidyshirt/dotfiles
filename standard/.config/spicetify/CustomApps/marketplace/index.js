var marketplace=(()=>{var e,F=Object.create,i=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptor,$=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,K=Object.getOwnPropertySymbols,U=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,z=(e,t,a)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t=t||{})B.call(t,a)&&z(e,a,t[a]);if(K)for(var a of K(t))W.call(t,a)&&z(e,a,t[a]);return e},h=(e,t)=>M(e,$(t)),v=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("react"===e)return Spicetify.React;if("react-dom"===e)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),t=(e,t)=>function(){return t||(0,e[q(e)[0]])((t={exports:{}}).exports,t),t.exports},G=(t,a,n,r)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of q(a))B.call(t,e)||e===n||i(t,e,{get:()=>a[e],enumerable:!(r=D(a,e))||r.enumerable});return t},a=(e,t,a)=>(a=null!=e?F(U(e)):{},G(!t&&e&&e.__esModule?a:i(a,"default",{value:e,enumerable:!0}),e)),n=t({"node_modules/react-simple-code-editor/lib/index.js"(e){"use strict";var n,t,a=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),k=e&&e.__assign||function(){return(k=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=e&&e.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,r)}:function(e,t,a,n){e[n=void 0===n?a:n]=t[a]}),i=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&r(t,e,a);return i(t,e),t},E=e&&e.__rest||function(e,t){var a={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},C=(Object.defineProperty(e,"__esModule",{value:!0}),o(v("react"))),g="navigator"in global&&/Win/i.test(navigator.platform),y="navigator"in global&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),_="npm__react-simple-code-editor__textarea",O="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(_,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(_," {\n    color: transparent !important;\n  }\n\n  .").concat(_,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),o=(t=C.Component,a(s,t),s.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(s.prototype,"session",{get:function(){return{history:this._history}},set:function(e){this._history=e.history},enumerable:!1,configurable:!0}),s.prototype.render=function(){var t=this,e=this.props,a=e.value,n=e.style,r=e.padding,i=e.highlight,o=e.textareaId,s=e.textareaClassName,l=e.autoFocus,c=e.disabled,u=e.form,p=e.maxLength,d=e.minLength,m=e.name,h=e.placeholder,f=e.readOnly,g=e.required,y=e.onClick,v=e.onFocus,b=e.onBlur,S=e.onKeyUp,w=(e.onKeyDown,e.onValueChange,e.tabSize,e.insertSpaces,e.ignoreTabKey,e.preClassName),e=E(e,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),r={paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r},i=i(a);return C.createElement("div",k({},e,{style:k(k({},x.container),n)}),C.createElement("textarea",{ref:function(e){return t._input=e},style:k(k(k({},x.editor),x.textarea),r),className:_+(s?" ".concat(s):""),id:o,value:a,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:y,onKeyUp:S,onFocus:v,onBlur:b,disabled:c,form:u,maxLength:p,minLength:d,name:m,placeholder:h,readOnly:f,required:g,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),C.createElement("pre",k({className:w,"aria-hidden":"true",style:k(k(k({},x.editor),x.highlight),r)},"string"==typeof i?{dangerouslySetInnerHTML:{__html:i+"<br />"}}:{children:i})),C.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:O}}))},s.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},s);function s(){var f=null!==t&&t.apply(this,arguments)||this;return f.state={capture:!0},f._recordCurrentState=function(){var e,t,a=f._input;a&&(e=a.value,t=a.selectionStart,a=a.selectionEnd,f._recordChange({value:e,selectionStart:t,selectionEnd:a}))},f._getLines=function(e,t){return e.substring(0,t).split("\n")},f._recordChange=function(e,t){void 0===t&&(t=!1);var a=f._history,n=a.stack,a=a.offset,a=(n.length&&-1<a&&(f._history.stack=n.slice(0,a+1),100<(a=f._history.stack.length)&&(f._history.stack=n.slice(n=a-100,a),f._history.offset=Math.max(f._history.offset-n,0))),Date.now());if(t){var n=f._history.stack[f._history.offset];if(n&&a-n.timestamp<3e3){var t=/[^a-z0-9]([a-z0-9]+)$/i,n=null==(n=f._getLines(n.value,n.selectionStart).pop())?void 0:n.match(t),r=null==(r=f._getLines(e.value,e.selectionStart).pop())?void 0:r.match(t);if(null!=n&&n[1]&&null!=(t=null==r?void 0:r[1])&&t.startsWith(n[1]))return void(f._history.stack[f._history.offset]=k(k({},e),{timestamp:a}))}}f._history.stack.push(k(k({},e),{timestamp:a})),f._history.offset++},f._updateInput=function(e){var t=f._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,f.props.onValueChange(e.value))},f._applyEdits=function(e){var t=f._input,a=f._history.stack[f._history.offset];a&&t&&(f._history.stack[f._history.offset]=k(k({},a),{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),f._recordChange(e),f._updateInput(e)},f._undoEdit=function(){var e=f._history,t=e.stack,e=e.offset,t=t[e-1];t&&(f._updateInput(t),f._history.offset=Math.max(e-1,0))},f._redoEdit=function(){var e=f._history,t=e.stack,e=e.offset,a=t[e+1];a&&(f._updateInput(a),f._history.offset=Math.min(e+1,t.length-1))},f._handleKeyDown=function(e){var t,a,n,r,i,o,s,l,c,u,p=f.props,d=p.tabSize,m=p.insertSpaces,h=p.ignoreTabKey,p=p.onKeyDown;p&&(p(e),e.defaultPrevented)||(27===e.keyCode&&e.currentTarget.blur(),t=(p=e.currentTarget).value,a=p.selectionStart,p=p.selectionEnd,n=(m?" ":"\t").repeat(d),9===e.keyCode&&!h&&f.state.capture?(e.preventDefault(),e.shiftKey?(r=(l=f._getLines(t,a)).length-1,i=f._getLines(t,p).length-1,m=t.split("\n").map(function(e,t){return r<=t&&t<=i&&e.startsWith(n)?e.substring(n.length):e}).join("\n"),t!==m&&(u=l[r],f._applyEdits({value:m,selectionStart:null!=u&&u.startsWith(n)?a-n.length:a,selectionEnd:p-(t.length-m.length)}))):a!==p?(o=(l=f._getLines(t,a)).length-1,s=f._getLines(t,p).length-1,u=l[o],f._applyEdits({value:t.split("\n").map(function(e,t){return o<=t&&t<=s?n+e:e}).join("\n"),selectionStart:u&&/\S/.test(u)?a+n.length:a,selectionEnd:p+n.length*(s-o+1)})):(c=a+n.length,f._applyEdits({value:t.substring(0,a)+n+t.substring(p),selectionStart:c,selectionEnd:c}))):8===e.keyCode?(d=a!==p,t.substring(0,a).endsWith(n)&&!d&&(e.preventDefault(),c=a-n.length,f._applyEdits({value:t.substring(0,a-n.length)+t.substring(p),selectionStart:c,selectionEnd:c}))):13===e.keyCode?a===p&&null!=(m=null==(h=f._getLines(t,a).pop())?void 0:h.match(/^\s+/))&&m[0]&&(e.preventDefault(),c=a+(l="\n"+m[0]).length,f._applyEdits({value:t.substring(0,a)+l+t.substring(p),selectionStart:c,selectionEnd:c})):57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode?(u=void 0,57===e.keyCode&&e.shiftKey?u=["(",")"]:219===e.keyCode?u=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?u=e.shiftKey?['"','"']:["'","'"]:192!==e.keyCode||e.shiftKey||(u=["`","`"]),a!==p&&u&&(e.preventDefault(),f._applyEdits({value:t.substring(0,a)+u[0]+t.substring(a,p)+u[1]+t.substring(p),selectionStart:a,selectionEnd:p+2}))):(y?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),f._undoEdit()):(y?e.metaKey&&90===e.keyCode&&e.shiftKey:g?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),f._redoEdit()):77!==e.keyCode||!e.ctrlKey||y&&!e.shiftKey||(e.preventDefault(),f.setState(function(e){return{capture:!e.capture}})))},f._handleChange=function(e){var e=e.currentTarget,t=e.value,a=e.selectionStart,e=e.selectionEnd;f._recordChange({value:t,selectionStart:a,selectionEnd:e},!0),f.props.onValueChange(t)},f._history={stack:[],offset:-1},f._input=null,f}e.default=o;var x={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}}}),r=t({"node_modules/prismjs/components/prism-core.js"(e,t){var a=function(l){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,e={},P={manual:l.Prism&&l.Prism.manual,disableWorkerMessageHandler:l.Prism&&l.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof L?new L(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function a(e,n){var r,t;switch(n=n||{},P.util.type(e)){case"Object":if(t=P.util.objId(e),n[t])return n[t];for(var i in r={},n[t]=r,e)e.hasOwnProperty(i)&&(r[i]=a(e[i],n));return r;case"Array":return(t=P.util.objId(e),n[t])?n[t]:(r=[],n[t]=r,e.forEach(function(e,t){r[t]=a(e,n)}),r);default:return e}},getLanguage:function(e){for(;e;){var t=a.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(a,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(e.stack)||[])[1];if(t){var a,n=document.getElementsByTagName("script");for(a in n)if(n[a].src==t)return n[a]}return null}},isActive:function(e,t,a){for(var n="no-"+t;e;){var r=e.classList;if(r.contains(t))return!0;if(r.contains(n))return!1;e=e.parentElement}return!!a}},languages:{plain:e,plaintext:e,text:e,txt:e,extend:function(e,t){var a,n=P.util.clone(P.languages[e]);for(a in t)n[a]=t[a];return n},insertBefore:function(a,e,t,n){var r,i=(n=n||P.languages)[a],o={};for(r in i)if(i.hasOwnProperty(r)){if(r==e)for(var s in t)t.hasOwnProperty(s)&&(o[s]=t[s]);t.hasOwnProperty(r)||(o[r]=i[r])}var l=n[a];return n[a]=o,P.languages.DFS(P.languages,function(e,t){t===l&&e!=a&&(this[e]=o)}),o},DFS:function e(t,a,n,r){r=r||{};var i,o,s,l=P.util.objId;for(i in t)t.hasOwnProperty(i)&&(a.call(t,i,t[i],n||i),o=t[i],"Object"!==(s=P.util.type(o))||r[l(o)]?"Array"!==s||r[l(o)]||(r[l(o)]=!0,e(o,a,i,r)):(r[l(o)]=!0,e(o,a,null,r)))}},plugins:{},highlightAll:function(e,t){P.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,a){var n={callback:a,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),P.hooks.run("before-all-elements-highlight",n);for(var r,i=0;r=n.elements[i++];)P.highlightElement(r,!0===t,n.callback)},highlightElement:function(e,t,a){var n=P.util.getLanguage(e),r=P.languages[n],i=(P.util.setLanguage(e,n),e.parentElement);i&&"pre"===i.nodeName.toLowerCase()&&P.util.setLanguage(i,n);var o={element:e,language:n,grammar:r,code:e.textContent};function s(e){o.highlightedCode=e,P.hooks.run("before-insert",o),o.element.innerHTML=o.highlightedCode,P.hooks.run("after-highlight",o),P.hooks.run("complete",o),a&&a.call(o.element)}if(P.hooks.run("before-sanity-check",o),(i=o.element.parentElement)&&"pre"===i.nodeName.toLowerCase()&&!i.hasAttribute("tabindex")&&i.setAttribute("tabindex","0"),!o.code)return P.hooks.run("complete",o),void(a&&a.call(o.element));P.hooks.run("before-highlight",o),o.grammar?t&&l.Worker?((n=new Worker(P.filename)).onmessage=function(e){s(e.data)},n.postMessage(JSON.stringify({language:o.language,code:o.code,immediateClose:!0}))):s(P.highlight(o.code,o.grammar,o.language)):s(P.util.encode(o.code))},highlight:function(e,t,a){e={code:e,grammar:t,language:a};if(P.hooks.run("before-tokenize",e),e.grammar)return e.tokens=P.tokenize(e.code,e.grammar),P.hooks.run("after-tokenize",e),L.stringify(P.util.encode(e.tokens),e.language);throw new Error('The language "'+e.language+'" has no grammar.')},tokenize:function(e,t){var a=t.rest;if(a){for(var n in a)t[n]=a[n];delete t.rest}for(var r=new c,i=(A(r,r.head,e),!function e(t,a,n,r,i,o){for(var s in n)if(n.hasOwnProperty(s)&&n[s]){var l=n[s];l=Array.isArray(l)?l:[l];for(var c=0;c<l.length;++c){if(o&&o.cause==s+","+c)return;for(var u,p=l[c],d=p.inside,m=!!p.lookbehind,h=!!p.greedy,f=p.alias,g=(h&&!p.pattern.global&&(u=p.pattern.toString().match(/[imsuy]*$/)[0],p.pattern=RegExp(p.pattern.source,u+"g")),p.pattern||p),y=r.next,v=i;y!==a.tail&&!(o&&v>=o.reach);v+=y.value.length,y=y.next){var b=y.value;if(a.length>t.length)return;if(!(b instanceof L)){var S,w=1;if(h){if(!(S=T(g,v,t,m))||S.index>=t.length)break;var k=S.index,E=S.index+S[0].length,C=v;for(C+=y.value.length;C<=k;)y=y.next,C+=y.value.length;if(C-=y.value.length,v=C,y.value instanceof L)continue;for(var _=y;_!==a.tail&&(C<E||"string"==typeof _.value);_=_.next)w++,C+=_.value.length;w--,b=t.slice(v,C),S.index-=v}else if(!(S=T(g,0,b,m)))continue;var k=S.index,O=S[0],x=b.slice(0,k),N=b.slice(k+O.length),b=v+b.length,I=(o&&b>o.reach&&(o.reach=b),y.prev),x=(x&&(I=A(a,I,x),v+=x.length),j(a,I,w),new L(s,d?P.tokenize(O,d):O,f,O));y=A(a,I,x),N&&A(a,y,N),1<w&&(O={cause:s+","+c,reach:b},e(t,a,n,y.prev,v,O),o&&O.reach>o.reach&&(o.reach=O.reach))}}}}}(e,r,t,r.head,0),r),o=[],s=i.head.next;s!==i.tail;)o.push(s.value),s=s.next;return o},hooks:{all:{},add:function(e,t){var a=P.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=P.hooks.all[e];if(a&&a.length)for(var n,r=0;n=a[r++];)n(t)}},Token:L};function L(e,t,a,n){this.type=e,this.content=t,this.alias=a,this.length=0|(n||"").length}function T(e,t,a,n){e.lastIndex=t;t=e.exec(a);return t&&n&&t[1]&&(e=t[1].length,t.index+=e,t[0]=t[0].slice(e)),t}function c(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function A(e,t,a){var n=t.next,a={value:a,prev:t,next:n};return t.next=a,n.prev=a,e.length++,a}function j(e,t,a){for(var n=t.next,r=0;r<a&&n!==e.tail;r++)n=n.next;(t.next=n).prev=t,e.length-=r}if(l.Prism=P,L.stringify=function t(e,a){if("string"==typeof e)return e;var n;if(Array.isArray(e))return n="",e.forEach(function(e){n+=t(e,a)}),n;var r,i={type:e.type,content:t(e.content,a),tag:"span",classes:["token",e.type],attributes:{},language:a},e=e.alias,o=(e&&(Array.isArray(e)?Array.prototype.push.apply(i.classes,e):i.classes.push(e)),P.hooks.run("wrap",i),"");for(r in i.attributes)o+=" "+r+'="'+(i.attributes[r]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+o+">"+i.content+"</"+i.tag+">"},!l.document)return l.addEventListener&&(P.disableWorkerMessageHandler||l.addEventListener("message",function(e){var e=JSON.parse(e.data),t=e.language,a=e.code,e=e.immediateClose;l.postMessage(P.highlight(a,P.languages[t],t)),e&&l.close()},!1)),P;var n,e=P.util.currentScript();function r(){P.manual||P.highlightAll()}return e&&(P.filename=e.src,e.hasAttribute("data-manual")&&(P.manual=!0)),P.manual||("loading"===(n=document.readyState)||"interactive"===n&&e&&e.defer?document.addEventListener("DOMContentLoaded",r):window.requestAnimationFrame?window.requestAnimationFrame(r):window.setTimeout(r,16)),P}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});void 0!==t&&t.exports&&(t.exports=a),"undefined"!=typeof global&&(global.Prism=a)}}),V=t({"node_modules/classnames/index.js"(e,t){!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n,r=typeof a;if("string"==r||"number"==r)e.push(a);else if(Array.isArray(a))!a.length||(n=s.apply(null,a))&&e.push(n);else if("object"==r)if(a.toString===Object.prototype.toString)for(var i in a)o.call(a,i)&&a[i]&&e.push(i);else e.push(a.toString())}}return e.join(" ")}void 0!==t&&t.exports?t.exports=s.default=s:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return s}):window.classNames=s}()}}),H=t({"node_modules/react-dropdown/dist/index.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var a,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in e){var i;Object.prototype.hasOwnProperty.call(e,a)&&((i=r?Object.getOwnPropertyDescriptor(e,a):null)&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(v("react")),d=(t=V())&&t.__esModule?t:{default:t};function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="Select...",t=function(e){var t,a=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");function n(e){var t,a;if(this instanceof n)return t=this,(t=!(a=i(n).call(this,e))||"object"!==s(a)&&"function"!=typeof a?u(t):a).state={selected:t.parseValue(e.value,e.options)||{label:void 0===e.placeholder?f:e.placeholder,value:""},isOpen:!1},t.dropdownRef=(0,p.createRef)(),t.mounted=!0,t.handleDocumentClick=t.handleDocumentClick.bind(u(t)),t.fireChangeEvent=t.fireChangeEvent.bind(u(t)),t;throw new TypeError("Cannot call a class as a function")}return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&h(a,e),a=n,(e=[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&(this.props.value?(e=this.parseValue(this.props.value,this.props.options))!==this.state.selected&&this.setState({selected:e}):this.setState({selected:{label:void 0===this.props.placeholder?f:this.props.placeholder,value:""}}))}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(e){this.props.onFocus&&"function"==typeof this.props.onFocus&&this.props.onFocus(this.state.isOpen),"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(t,e){var a;if("string"==typeof t)for(var n,r=0,i=e.length;r<i;r++)"group"===e[r].type?(n=e[r].items.filter(function(e){return e.value===t})).length&&(a=n[0]):void 0!==e[r].value&&e[r].value===t&&(a=e[r]);return a||t}},{key:"setValue",value:function(e,t){e={selected:{value:e,label:t},isOpen:!1};this.fireChangeEvent(e),this.setState(e)}},{key:"fireChangeEvent",value:function(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}},{key:"renderOption",value:function(a){var e=a.value,t=(void 0===e&&(e=a.label||a),a.label||a.value||a),n=e===this.state.selected.value||e===this.state.selected;m(r={},"".concat(this.props.baseClassName,"-option"),!0),m(r,a.className,!!a.className),m(r,"is-selected",n);var r=(0,d.default)(r),i=Object.keys(a.data||{}).reduce(function(e,t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach(function(e){m(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},e,m({},"data-".concat(t),a.data[t]))},{});return p.default.createElement("div",l({key:e,className:r,onMouseDown:this.setValue.bind(this,e,t),onClick:this.setValue.bind(this,e,t),role:"option","aria-selected":n?"true":"false"},i),t)}},{key:"buildMenu",value:function(){var n=this,e=this.props,t=e.options,r=e.baseClassName,e=t.map(function(e){var t,a;return"group"===e.type?(t=p.default.createElement("div",{className:"".concat(r,"-title")},e.name),a=e.items.map(function(e){return n.renderOption(e)}),p.default.createElement("div",{className:"".concat(r,"-group"),key:e.name,role:"listbox",tabIndex:"-1"},t,a)):n.renderOption(e)});return e.length?e:p.default.createElement("div",{className:"".concat(r,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(e){!this.mounted||this.dropdownRef.current.contains(e.target)||this.state.isOpen&&this.setState({isOpen:!1})}},{key:"isValueSelected",value:function(){return"string"==typeof this.state.selected||""!==this.state.selected.value}},{key:"render",value:function(){var e=this.props,t=e.baseClassName,a=e.controlClassName,n=e.placeholderClassName,r=e.menuClassName,i=e.arrowClassName,o=e.arrowClosed,s=e.arrowOpen,e=e.className,l=this.props.disabled?"Dropdown-disabled":"",c="string"==typeof this.state.selected?this.state.selected:this.state.selected.label,e=(0,d.default)((m(u={},"".concat(t,"-root"),!0),m(u,e,!!e),m(u,"is-open",this.state.isOpen),u)),a=(0,d.default)((m(u={},"".concat(t,"-control"),!0),m(u,a,!!a),m(u,l,!!l),u)),u=(0,d.default)((m(l={},"".concat(t,"-placeholder"),!0),m(l,n,!!n),m(l,"is-selected",this.isValueSelected()),l)),l=(0,d.default)((m(n={},"".concat(t,"-menu"),!0),m(n,r,!!r),n)),n=(0,d.default)((m(r={},"".concat(t,"-arrow"),!0),m(r,i,!!i),r)),i=p.default.createElement("div",{className:u},c),r=this.state.isOpen?p.default.createElement("div",{className:l,"aria-expanded":"true"},this.buildMenu()):null;return p.default.createElement("div",{ref:this.dropdownRef,className:e},p.default.createElement("div",{className:a,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},i,p.default.createElement("div",{className:"".concat(t,"-arrow-wrapper")},s&&o?this.state.isOpen?s:o:p.default.createElement("span",{className:n}))),r)}}])&&r(a.prototype,e),t&&r(a,t),n}(p.Component);t.defaultProps={baseClassName:"Dropdown"},e.default=t}}),J=t({"node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:var a=e.type;switch(a){case p:case d:case o:case l:case s:case h:return a;default:var n=a&&a.$$typeof;switch(n){case u:case m:case y:case g:case c:return n;default:return t}}case i:return t}}}function a(e){return t(e)===d}var n,r,i,o,s,l,c,u,p,d,m,h,f,g,y,v,b,S,w,k,E,C,_,O,x,N,I,P,L,T,A;n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,S=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119,n=d,k=u,E=c,C=r,_=m,O=o,x=y,N=g,I=i,P=l,L=s,T=h,A=!1,e.AsyncMode=p,e.ConcurrentMode=n,e.ContextConsumer=k,e.ContextProvider=E,e.Element=C,e.ForwardRef=_,e.Fragment=O,e.Lazy=x,e.Memo=N,e.Portal=I,e.Profiler=P,e.StrictMode=L,e.Suspense=T,e.isAsyncMode=function(e){return A||(A=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),a(e)||t(e)===p},e.isConcurrentMode=a,e.isContextConsumer=function(e){return t(e)===u},e.isContextProvider=function(e){return t(e)===c},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},e.isForwardRef=function(e){return t(e)===m},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===y},e.isMemo=function(e){return t(e)===g},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===l},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===h},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===l||e===s||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===m||e.$$typeof===b||e.$$typeof===S||e.$$typeof===w||e.$$typeof===v)},e.typeOf=t}}),Q=t({"node_modules/react-is/index.js"(e,t){"use strict";t.exports=J()}}),Y=t({"node_modules/object-assign/index.js"(e,t){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var a,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var i in a=Object(arguments[r]))c.call(a,i)&&(n[i]=a[i]);if(l)for(var o=l(a),s=0;s<o.length;s++)u.call(a,o[s])&&(n[o[s]]=a[o[s]])}return n}}}),X=t({"node_modules/prop-types/lib/ReactPropTypesSecret.js"(e,t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}),Z=t({"node_modules/prop-types/lib/has.js"(e,t){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}}),ee=t({"node_modules/prop-types/checkPropTypes.js"(e,t){"use strict";var l,c,u,p=function(){};function a(e,t,a,n,r){for(var i in e)if(u(e,i)){var o,s;try{if("function"!=typeof e[i])throw(s=Error((n||"React class")+": "+a+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.")).name="Invariant Violation",s;o=e[i](t,i,n,a,null,l)}catch(e){o=e}!o||o instanceof Error||p((n||"React class")+": type specification of "+a+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in c)&&(c[o.message]=!0,i=r?r():"",p("Failed "+a+" type: "+o.message+(null!=i?i:"")))}}l=X(),c={},u=Z(),p=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},a.resetWarningCache=function(){c={}},t.exports=a}}),te=t({"node_modules/prop-types/factoryWithTypeCheckers.js"(e,t){"use strict";var c=Q(),g=Y(),y=X(),v=Z(),n=ee(),b=function(){};function r(){return null}b=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},t.exports=function(i,u){var o="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";var p="<<anonymous>>",e={array:t("array"),bigint:t("bigint"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:a(r),arrayOf:function(l){return a(function(e,t,a,n,r){if("function"!=typeof l)return new d("Property `"+r+"` of component `"+a+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i))return new d("Invalid "+n+" `"+r+"` of type `"+h(i)+"` supplied to `"+a+"`, expected an array.");for(var o=0;o<i.length;o++){var s=l(i,o,a,n,r+"["+o+"]",y);if(s instanceof Error)return s}return null})},element:a(function(e,t,a,n,r){return e=e[t],i(e)?null:new d("Invalid "+n+" `"+r+"` of type `"+h(e)+"` supplied to `"+a+"`, expected a single ReactElement.")}),elementType:a(function(e,t,a,n,r){return e=e[t],c.isValidElementType(e)?null:new d("Invalid "+n+" `"+r+"` of type `"+h(e)+"` supplied to `"+a+"`, expected a single ReactElement type.")}),instanceOf:function(o){return a(function(e,t,a,n,r){var i;return e[t]instanceof o?null:(i=o.name||p,new d("Invalid "+n+" `"+r+"` of type `"+((n=e[t]).constructor&&n.constructor.name?n.constructor.name:p)+"` supplied to `"+a+"`, expected instance of `"+i+"`."))})},node:a(function(e,t,a,n,r){return l(e[t])?null:new d("Invalid "+n+" `"+r+"` supplied to `"+a+"`, expected a ReactNode.")}),objectOf:function(l){return a(function(e,t,a,n,r){if("function"!=typeof l)return new d("Property `"+r+"` of component `"+a+"` has invalid PropType notation inside objectOf.");var i,o=e[t];if("object"!==(e=h(o)))return new d("Invalid "+n+" `"+r+"` of type `"+e+"` supplied to `"+a+"`, expected an object.");for(i in o)if(v(o,i)){var s=l(o,i,a,n,r+"."+i,y);if(s instanceof Error)return s}return null})},oneOf:function(s){if(Array.isArray(s))return a(function(e,t,a,n,r){for(var i=e[t],o=0;o<s.length;o++)if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,s[o]))return null;e=JSON.stringify(s,function(e,t){return"symbol"===f(t)?String(t):t});return new d("Invalid "+n+" `"+r+"` of value `"+String(i)+"` supplied to `"+a+"`, expected one of "+e+".")});b(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array.");return r},oneOfType:function(l){if(!Array.isArray(l))return b("Invalid argument supplied to oneOfType, expected an instance of array."),r;for(var e=0;e<l.length;e++){var t=l[e];if("function"!=typeof t)return b("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(t)+" at index "+e+"."),r}return a(function(e,t,a,n,r){for(var i=[],o=0;o<l.length;o++){var s=(0,l[o])(e,t,a,n,r,y);if(null==s)return null;s.data&&v(s.data,"expectedType")&&i.push(s.data.expectedType)}return new d("Invalid "+n+" `"+r+"` supplied to `"+a+"`"+(0<i.length?", expected one of type ["+i.join(", ")+"]":"")+".")})},shape:function(l){return a(function(e,t,a,n,r){var i,o=e[t];if("object"!==(e=h(o)))return new d("Invalid "+n+" `"+r+"` of type `"+e+"` supplied to `"+a+"`, expected `object`.");for(i in l){var s=l[i];if("function"!=typeof s)return m(a,n,r,i,f(s));s=s(o,i,a,n,r+"."+i,y);if(s)return s}return null})},exact:function(c){return a(function(e,t,a,n,r){var i,o=e[t],s=h(o);if("object"!==s)return new d("Invalid "+n+" `"+r+"` of type `"+s+"` supplied to `"+a+"`, expected `object`.");for(i in g({},e[t],c)){var l=c[i];if(v(c,i)&&"function"!=typeof l)return m(a,n,r,i,f(l));if(!l)return new d("Invalid "+n+" `"+r+"` key `"+i+"` supplied to `"+a+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(c),null,"  "));l=l(o,i,a,n,r+"."+i,y);if(l)return l}return null})}};function d(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function a(s){var l={},c=0;function e(e,t,a,n,r,i,o){if(n=n||p,i=i||a,o!==y){if(u)throw(o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",o;"undefined"!=typeof console&&!l[o=n+":"+a]&&c<3&&(b("You are manually calling a React.PropTypes validation function for the `"+i+"` prop on `"+n+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),l[o]=!0,c++)}return null==t[a]?e?null===t[a]?new d("The "+r+" `"+i+"` is marked as required in `"+n+"`, but its value is `null`."):new d("The "+r+" `"+i+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:s(t,a,n,r,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(o){return a(function(e,t,a,n,r,i){return h(e=e[t])!==o?new d("Invalid "+n+" `"+r+"` of type `"+f(e)+"` supplied to `"+a+"`, expected `"+o+"`.",{expectedType:o}):null})}function m(e,t,a,n,r){return new d((e||"React class")+": "+t+" type `"+a+"."+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+r+"`.")}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null===e||i(e))return!0;var t=function(e){if("function"==typeof(e=e&&(o&&e[o]||e[s])))return e}(e);if(!t)return!1;var a,n=t.call(e);if(t!==e.entries){for(;!(a=n.next()).done;)if(!l(a.value))return!1}else for(;!(a=n.next()).done;){var r=a.value;if(r&&!l(r[1]))return!1}return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(e=e,"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t)}function f(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return d.prototype=Error.prototype,e.checkPropTypes=n,e.resetWarningCache=n.resetWarningCache,e.PropTypes=e}}}),t=t({"node_modules/prop-types/index.js"(e,t){var a=Q();t.exports=te()(a.isElement,!0)}}),ae={},ne=ae,re={default:()=>function(){return tt.default.createElement(et,null)}};for(e in re)i(ne,e,{get:re[e],enumerable:!0});var o=a(v("react")),s=a(v("react")),f=(t,e)=>{t=localStorage.getItem(t);if(!t)return e;try{return JSON.parse(t)}catch(e){return t}},ie=e=>{const t=document.querySelector("style.marketplaceSnippets"),a=(t&&t.remove(),document.createElement("style"));e=e.reduce((e,t)=>e=(e+=`/* ${t.title} - ${t.description} */
`)+t.code+`
`,"");a.innerHTML=e,a.classList.add("marketplaceSnippets"),document.head.appendChild(a)},oe=(e,t)=>{let a=[];return e&&0<e.length?a=e.map(e=>({name:e.name,url:e.url.startsWith("javascript:")?"":e.url})):a.push({name:t,url:"https://github.com/"+t}),a},se=()=>{console.log("Resetting Marketplace"),Object.keys(localStorage).forEach(e=>{e.startsWith("marketplace:")&&(localStorage.removeItem(e),console.log("Removed "+e))}),console.log("Marketplace has been reset"),location.reload()},le=a=>{const e=document.querySelector("link[href='colors.css']"),t=(e&&e.remove(),document.querySelector("style.marketplaceCSS.marketplaceScheme"));if(t&&t.remove(),a){const n=document.createElement("style");n.classList.add("marketplaceCSS"),n.classList.add("marketplaceScheme");let t=":root {";const r=Object.keys(a);r.forEach(e=>{t=(t+=`--spice-${e}: #${a[e]};`)+`--spice-rgb-${e}: ${(e=>{if(3===e.length)e=e.split("").map(e=>e+e).join("");else{if(6!=e.length)throw"Only 3- or 6-digit hex colours are allowed.";if(e.match(/[^0-9a-f]/i))throw"Only hex colours are allowed."}e=e.match(/.{1,2}/g);if(e&&3===e.length)return[parseInt(e[0],16),parseInt(e[1],16),parseInt(e[2],16)];throw"Could not parse hex colour."})(a[e])};`}),t+="}",n.innerHTML=t,document.head.appendChild(n)}else{const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href","colors.css"),i.classList.add("userCSS"),document.head.appendChild(i)}};var g="marketplace:installed-extensions",y="marketplace:installed-snippets",b="marketplace:installed-themes",ce="marketplace:active-tab",l="marketplace:tabs",ue="marketplace:sort-by",c="marketplace:theme-installed",pe=[{name:"Extensions",enabled:!0},{name:"Themes",enabled:!0},{name:"Snippets",enabled:!0},{name:"Installed",enabled:!0}],S=100,de="/marketplace",u=a(v("react")),d=a(v("react")),me=a(n()),he=a(r()),fe=(n=Prism,r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css,(r=n.languages.markup)&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css")),a(v("react"))),ge="button-module__button___hf2qg_marketplace",ye="button-module__circle___EZ88P_marketplace",w=e=>{var t=e.type||"round";const a=[ge];return"circle"===t&&a.push(ye),e.classes&&a.push(...e.classes),fe.default.createElement("button",{className:a.join(" "),onClick:e.onClick,"aria-label":e.label,disabled:e.disabled},e.children)},p=a(v("react")),ve=t=>p.default.createElement("div",null,p.default.createElement("label",{style:{display:"block",textAlign:"center"}},!t.disabled&&p.default.createElement("span",null,t.value.length?"Click to change image":"Click to add image"),p.default.createElement("input",{id:t.id,disabled:t.disabled,style:{display:"none"},type:"file",onChange:e=>{t.onChange(null==(e=e.target.files)?void 0:e[0])}}))),be=o=>{var e,t="marketplace-customCSS-preview";const[s,a]=d.default.useState("ADD_SNIPPET"!==o.type&&(null==(e=o.content)?void 0:e.item.code)||""),[n,r]=d.default.useState("ADD_SNIPPET"!==o.type&&(null==(e=o.content)?void 0:e.item.title)||""),[l,i]=d.default.useState("ADD_SNIPPET"!==o.type&&(null==(e=o.content)?void 0:e.item.description)||""),[c,u]=d.default.useState("ADD_SNIPPET"!==o.type&&(null==(e=o.content)?void 0:e.item.imageURL)||""),p=()=>n.replace(/\n/g,"").replaceAll(" ","-");return d.default.createElement("div",{id:"marketplace-add-snippet-container"},d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-custom-css"},"Custom CSS"),d.default.createElement("div",{className:"marketplace-customCSS-editor-wrapper"},d.default.createElement(me.default,{value:s,onValueChange:e=>a(e),highlight:e=>(0,he.highlight)(e,he.languages.css),textareaId:"marketplace-custom-css",textareaClassName:"snippet-code-editor",readOnly:"VIEW_SNIPPET"===o.type,placeholder:"Input your own custom CSS here! You can find them in the installed tab for management.",style:{}}))),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-customCSS-name-submit"},"Snippet Name"),d.default.createElement("input",{id:"marketplace-customCSS-name-submit",value:n,onChange:e=>{"VIEW_SNIPPET"!==o.type&&r(e.target.value)},placeholder:"Enter a name for your custom snippet."})),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-customCSS-description-submit"},"Snippet Description"),d.default.createElement("input",{id:"marketplace-customCSS-description-submit",value:l,onChange:e=>{"VIEW_SNIPPET"!==o.type&&i(e.target.value)},placeholder:"Enter a description for your custom snippet."})),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:t},"Snippet Preview ","VIEW_SNIPPET"!==o.type&&"(optional)"),d.default.createElement(ve,{id:t,disabled:"VIEW_SNIPPET"===o.type,value:c,onChange:async e=>{if("VIEW_SNIPPET"!==o.type&&e)try{n=e;var t=await new Promise((e,t)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{e(a.result)},a.onerror=e=>{t(e)}});t&&(console.log(t),u(t))}catch(e){console.error(e)}var n}}),c&&d.default.createElement("label",{htmlFor:t,style:{textAlign:"center"}},d.default.createElement("img",{className:"marketplace-customCSS-image-preview",src:c,alt:"Preview"}))),"VIEW_SNIPPET"!==o.type?d.default.createElement(w,{onClick:()=>{var e=p(),t=l.trim(),a="marketplace:installed:snippet:"+e;if(f(a)&&"EDIT_SNIPPET"!==o.type)Spicetify.showNotification("That name is already taken!");else{if(console.log("Installing snippet: "+e),o.content&&o.content.item.title!==e){console.log("Deleting outdated snippet: "+o.content.item.title),localStorage.removeItem("marketplace:installed:snippet:"+o.content.item.title);const i=f(y,[]);var n=i.filter(e=>{return e!=="marketplace:installed:snippet:"+(null==(e=o.content)?void 0:e.item.title)});localStorage.setItem(y,JSON.stringify(n))}localStorage.setItem(a,JSON.stringify({title:e,code:s,description:t,imageURL:c,custom:!0}));const r=f(y,[]);-1===r.indexOf(a)&&(r.push(a),console.log(r),localStorage.setItem(y,JSON.stringify(r)));n=r.map(e=>f(e));ie(n),Spicetify.PopupModal.hide(),"EDIT_SNIPPET"===o.type&&location.reload()}},disabled:!p()||!s.replace(/\n/g,"\\n")},"Save CSS"):d.default.createElement(d.default.Fragment,null))},k=a(v("react")),Se=()=>k.default.createElement("div",{id:"marketplace-reload-container"},k.default.createElement("p",null,"A page reload is required to complete this operation."),k.default.createElement("div",{className:"marketplace-reload-modal__button-container"},k.default.createElement(w,{onClick:()=>{Spicetify.PopupModal.hide(),location.reload()}},"Reload now"),k.default.createElement(w,{onClick:()=>{Spicetify.PopupModal.hide()}},"Reload later"))),E=a(v("react")),C=a(v("react")),_=a(v("react")),we="toggle-module__toggle-wrapper___ocE5z_marketplace",ke="toggle-module__disabled___OYAYf_marketplace",Ee="toggle-module__toggle-input___ceLM4_marketplace",Ce="toggle-module__toggle-indicator-wrapper___6Lcp0_marketplace",_e="toggle-module__toggle-indicator___nCxwE_marketplace",Oe=e=>{var t="toggle:"+e.storageKey;const a=[we];return!1===e.clickable&&a.push(ke),_.default.createElement("label",{className:a.join(" ")},_.default.createElement("input",{className:Ee,type:"checkbox",checked:e.enabled,"data-storage-key":e.storageKey,id:t,title:"Toggle for "+e.storageKey,onChange:e.onChange}),_.default.createElement("span",{className:Ce},_.default.createElement("span",{className:_e})))},O=a=>{var e="toggle:"+a.storageKey,t=!!a.modalConfig.visual[a.storageKey];return C.default.createElement("div",{className:"setting-row"},C.default.createElement("label",{htmlFor:e,className:"col description"},a.name),C.default.createElement("div",{className:"col action"},C.default.createElement(Oe,{name:a.name,storageKey:a.storageKey,enabled:t,onChange:e=>{var t=e.target.checked,e=e.target.dataset.storageKey;a.modalConfig.visual[e]=t,console.log(`toggling ${e} to `+t),localStorage.setItem("marketplace:"+e,String(t)),a.updateConfig(a.modalConfig)}})))},x=a(v("react")),xe=n=>{var e="toggle:"+n.name;const t=n.modalConfig.tabs.reduce((e,t,a)=>t.name===n.name?a:e,-1);var a=n.modalConfig.tabs[t]["enabled"];function r(e,t){console.log({currPos:e,dir:t});var t=e+t,a=n.modalConfig.tabs[t];n.modalConfig.tabs[t]=n.modalConfig.tabs[e],n.modalConfig.tabs[e]=a,localStorage.setItem(l,JSON.stringify(n.modalConfig.tabs)),n.updateConfig(n.modalConfig)}return x.default.createElement("div",{className:"setting-row"},x.default.createElement("label",{htmlFor:e,className:"col description"},n.name),x.default.createElement("div",{className:"col action"},x.default.createElement("button",{title:"Move up",className:"arrow-btn",onClick:()=>r(t,-1)},x.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:String(Spicetify.SVGIcons["chart-up"])}})),x.default.createElement("button",{title:"Move down",className:"arrow-btn",onClick:()=>r(t,1)},x.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:String(Spicetify.SVGIcons["chart-down"])}})),x.default.createElement(Oe,{name:n.name,storageKey:"tab:"+n.name,clickable:"Extensions"!==n.name,enabled:a,onChange:e=>{console.log({e:e}),n.modalConfig.tabs[t].enabled=e.target.checked,localStorage.setItem(l,JSON.stringify(n.modalConfig.tabs)),n.updateConfig(n.modalConfig)}})))},Ne=({CONFIG:e,updateAppConfig:t})=>{const[a,n]=E.default.useState(m({},e)),r=e=>{t(m({},e)),n(m({},e))},i=document.querySelector("body > generic-modal button.main-trackCreditsModal-closeBtn"),o=document.querySelector("body > generic-modal > div");return i&&o&&(i.onclick=()=>location.reload(),i.setAttribute("style","cursor: pointer;"),o.onclick=e=>{e.target===o&&location.reload()}),E.default.createElement("div",{id:"marketplace-config-container"},E.default.createElement("h2",null,"Options"),E.default.createElement(O,{name:"Stars count",storageKey:"stars",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Tags",storageKey:"tags",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Hide installed when browsing",storageKey:"hideInstalled",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Shift colors every minute",storageKey:"colorShift",modalConfig:a,updateConfig:r}),E.default.createElement("h2",null,"Tabs"),E.default.createElement("div",{className:"tabs-container"},a.tabs.map(({name:e},t)=>E.default.createElement(xe,{key:t,name:e,modalConfig:a,updateConfig:r}))),E.default.createElement("h2",null,"Reset"),E.default.createElement("div",{className:"setting-row"},E.default.createElement("label",{className:"col description"},"Uninstall all extensions and themes, and reset preferences"),E.default.createElement("div",{className:"col action"},E.default.createElement(w,{onClick:se},"Reset"))))},N=(e,t,a,n)=>{e=((e,t,a,n)=>{switch(e){case"ADD_SNIPPET":return{title:"Add Snippet",content:u.default.createElement(be,{type:e}),isLarge:!0};case"EDIT_SNIPPET":return{title:"Edit Snippet",content:u.default.createElement(be,{type:e,content:n}),isLarge:!0};case"VIEW_SNIPPET":return{title:"View Snippet",content:u.default.createElement(be,{type:e,content:n}),isLarge:!0};case"RELOAD":return{title:"Reload",content:u.default.createElement(Se,null),isLarge:!1};case"SETTINGS":return{title:"Settings",content:u.default.createElement(Ne,{CONFIG:t,updateAppConfig:a}),isLarge:!0};default:return{title:"",content:u.default.createElement("div",null),isLarge:!1}}})(e,t,a,n),Spicetify.PopupModal.display(e)},Ie=[{title:"Fix 'Episodes' Icon",description:"Fix the color of the Episodes icon",code:".main-yourEpisodesButton-yourEpisodesIcon { background: var(--spice-text); } .main-yourEpisodesButton-yourEpisodesIcon path { fill: var(--spice-player); opacity: 0.7; }",preview:"https://i.imgur.com/n3EwrTL.png"},{title:"Fix 'Liked' Icon",description:"Fix the colours of the Liked icon in sidebar",code:".main-likedSongsButton-likedSongsIcon {\n  color: var(--spice-sidebar);\n  background: var(--spice-text);\n}",preview:"https://placekitten.com/150/150"},{title:"Fix 'Made For You' Icon",description:"Fix the colours of the Made For You icon",code:".utp540VMXpC3bYIxo9wy {\n  color: var(--spice-sidebar);\n  background: var(--spice-text);\n  opacity: 1;\n}\n.t6d9Hf7maqFPHp1Y02VR {\n  color: var(--spice-text);\n}",preview:"https://placekitten.com/200/200"},{title:"Hide Upgrade Button",description:"Makes the upgrade button hidden",code:".main-topBar-UpgradeButton {\n  display: none !important;\n}",preview:"https://placekitten.com/250/250"},{title:"Auto-hide Friends",description:"Collapse the friends activity sidebar on small screens",code:"[aria-label='Friend Activity'] {\n  transition: width 0.3s;\n}\n@media screen and (max-width: 1200px) {\n  [aria-label='Friend Activity'] {\n    width: 0;\n  }\n  [aria-label='Friend Activity'] .LayoutResizer__resize-bar {\n    display: none;\n  }\n}",preview:"resources/assets/snippets/auto-hide-friends.png"},{title:"Smooth Reveal Playlist Gradient",description:"Reveals the playlist gradient header gradient with a fade in effect",code:".main-entityHeader-overlay,\n.main-actionBarBackground-background,\n.main-entityHeader-overlay,\n.main-entityHeader-backgroundColor {\n  -webkit-transition: 3s;\n}",preview:"https://placekitten.com/300/300"},{title:"Fix progress bar displacement",description:"Fix the progress bar displacement when listening on different devices",code:".main-connectBar-connectBar {\n  overflow: visible !important;\n  --triangle-position: 147px !important;\n  align-items: unset !important;\n  height: 0px !important;\n  position: absolute !important;\n  left: 80% !important;\n  display: flex !important;\n  bottom: 2% !important;\n  padding: unset !important;\n}",preview:"https://placekitten.com/350/350"},{title:"Fix playlist arrows",description:"Fixes the opened and closed orientation of the playlist folder arrows",code:".main-rootlist-expandArrow {\n  -webkit-transform: rotate(-90deg) !important;\n  transform: rotate(-90deg) !important;\n}\n.main-rootlist-expandArrow:hover {\n  -webkit-transform: rotate(-90deg) !important;\n  transform: rotate(-90deg) !important;\n}\n.qAAhQw9dXNB7DbPgDDxy {\n  -webkit-transform: rotate(0deg) !important;\n  transform: rotate(0deg) !important;\n}\n.qAAhQw9dXNB7DbPgDDxy:hover {\n  -webkit-transform: rotate(0deg) !important;\n  transform: rotate(0deg) !important;\n}",preview:"resources/assets/snippets/fix-playlist-arrows.png"},{title:"Fix main view width",description:"Makes main view fill up all available space",code:".contentSpacing {\n  max-width: 100% !important;\n}",preview:"resources/assets/snippets/fix-main-view-width.png"},{title:"Left aligned heart icons",description:"Moves the heart icon to the left side of the track title in track views",code:".main-trackList-rowSectionStart {\n  margin-left: 38px !important;\n}\n.main-addButton-button.main-trackList-rowHeartButton,\n.main-addButton-button.main-trackList-rowHeartButton {\n  position: absolute !important;\n  left: 48px !important;\n}",preview:"https://placekitten.com/400/400"},{title:"Hover Panels",description:"Have your playlist, friend activity, and controls bar be hoverable.",code:".Root__nav-bar {\n  position: absolute;\n  width: 40px;\n  opacity: 0;\n  bottom: 0;\n  left: 0;\n  top: 0;\n  z-index: 1;\n}\nnav.Root__nav-bar:hover {\n  position: inherit;\n  width: 225px;\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n}\n.LayoutResizer__resize-bar {\n  cursor: none;\n}\n.Root__top-bar {\n  opacity: 0;\n  transition: visibility 5s, opacity 1s linear;\n}\n.Root__top-bar:hover {\n  transition-delay: 0.5s;\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n}\n.main-topBar-container {\n  -webkit-padding-end: 32px;\n  padding: 16px 85px;\n  padding-inline-end: 32px;\n  max-width: none;\n}\naside.main-buddyFeed-buddyFeedRoot:hover {\n  position: inherit;\n  width: var(--buddy-feed-width);\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n  left: 0;\n}\naside.main-buddyFeed-buddyFeedRoot {\n  position: absolute;\n  width: 65px;\n  opacity: 0;\n  bottom: 0;\n  left: -30px;\n  top: 0;\n  z-index: 1;\n}",preview:"https://placekitten.com/450/450"}];async function Pe(e,t,a){var n=window.sessionStorage.getItem(e+"-"+t);const r=window.sessionStorage.getItem("noManifests");if(n)return JSON.parse(n);const i=`https://raw.githubusercontent.com/${e}/${t}/${a}/manifest.json`;if(null!=r&&r.includes(i))return null;n=await fetch(i).then(e=>e.json()).catch(()=>{var n=[i],r="noManifests";n&&null!=n&&n.forEach(e=>{r=r||n.user+"-"+n.repo;var t=window.sessionStorage.getItem(r);const a=t?JSON.parse(t):[];a.push(e),window.sessionStorage.setItem(r,JSON.stringify(a))})});return n&&window.sessionStorage.setItem(e+"-"+t,JSON.stringify(n)),n}var I=a(v("react")),Le=class extends I.default.Component{render(){return I.default.createElement("div",{onClick:this.props.onClick},I.default.createElement("p",{style:{fontSize:100,lineHeight:"65px"}},"»"),I.default.createElement("span",{style:{fontSize:20}},"Load more"))}},P=a(v("react")),Te=()=>P.default.createElement("svg",{width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},P.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},P.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"0s"}),P.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"0s"})),P.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},P.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-0.5s"}),P.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-0.5s"}))),Ae=a(v("react")),je=()=>Ae.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},Ae.default.createElement("path",{d:"M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z",fill:"currentColor"})),L=a(v("react")),Re=a(H()),Fe=t=>{var e=t.sortBoxOptions.map(e=>({value:e.key,label:e.value})),a=t.sortBoxOptions.find(t.sortBySelectedFn);return L.default.createElement("div",{className:"marketplace-sortBox"},L.default.createElement("div",{className:"marketplace-sortBox-header"},L.default.createElement("div",{className:"marketplace-sortBox-header-title"}),L.default.createElement(Re.default,{placeholder:"Select an option",options:e,value:null==a?void 0:a.key,onChange:e=>{t.onChange(e.value)}})))},T=a(v("react")),Me=a(v("react-dom")),De=a(H()),n=a(t()),$e=class extends T.default.Component{constructor(e){super(e)}render(){return this.props.item.enabled?T.default.createElement("li",{className:"marketplace-tabBar-headerItem","data-tab":this.props.item.value,onClick:e=>{e.preventDefault(),this.props.switchTo(this.props.item.key)}},T.default.createElement("a",{"aria-current":"page",className:"marketplace-tabBar-headerItemLink "+(this.props.item.active?"marketplace-tabBar-active":""),draggable:"false",href:""},T.default.createElement("span",{className:"main-type-mestoBold"},this.props.item.value))):null}},qe=T.default.memo(function({items:e,switchTo:t}){e=e.map(e=>({value:e.key,label:e.value}));return T.default.createElement("li",{className:"marketplace-tabBar-headerItem"},T.default.createElement(De.default,{className:"main-type-mestoBold",options:e,value:"More",placeholder:"More",onChange:e=>{t(e.value)}}))}),Ke=({children:e})=>e?Me.default.createPortal(T.default.createElement("div",{className:"main-topBar-topbarContent"},e),document.querySelector(".main-topBar-topbarContentWrapper")):null,Ue=(Ke.propTypes={children:n.default.element},e=>{const t=document.querySelector(".Root__main-view .os-resize-observer-host");if(!t)return null;const[a,n]=(0,T.useState)(t.clientWidth),r=()=>n(t.clientWidth);return(0,T.useEffect)(()=>{const e=new ResizeObserver(r);return e.observe(t),()=>{e.disconnect()}},[r]),T.default.createElement(Ke,null,T.default.createElement(Be,{windowSize:a,links:e.links,activeLink:e.activeLink,switchCallback:e.switchCallback}))}),Be=T.default.memo(function({links:e,activeLink:a,switchCallback:t,windowSize:n=1/0}){const r=T.default.useRef(null),[i,o]=(0,T.useState)([]),[s,l]=(0,T.useState)(0),[c,u]=(0,T.useState)([]),p=e.map(({name:e,enabled:t})=>{return{key:e,value:e,active:e===a,enabled:t}});return(0,T.useEffect)(()=>{r.current&&l(r.current.clientWidth)},[n]),(0,T.useEffect)(()=>{if(r.current){const t=Array.from(r.current.children);var e=t.map(e=>e.clientWidth);o(e)}},[e]),(0,T.useEffect)(()=>{if(r.current)if(i.reduce((e,t)=>e+t,0)<=s)u([]);else{var e=Math.max(...i);const n=[];let a=e;i.forEach((e,t)=>{s>=a+e?a+=e:n.push(t)}),u(n)}},[s,i]),T.default.createElement("nav",{className:"marketplace-tabBar marketplace-tabBar-nav"},T.default.createElement("ul",{className:"marketplace-tabBar-header",ref:r},p.filter((e,t)=>!c.includes(t)).map(e=>T.default.createElement($e,{key:e.key,item:e,switchTo:t})),c.length||0===i.length?T.default.createElement(qe,{items:c.map(e=>p[e]).filter(e=>e),switchTo:t}):null))}),A=a(v("react")),We=a(v("react")),ze=()=>We.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 448 512","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},We.default.createElement("path",{d:"M53.21 467c1.562 24.84 23.02 45 47.9 45h245.8c24.88 0 46.33-20.16 47.9-45L416 128H32L53.21 467zM432 32H320l-11.58-23.16c-2.709-5.42-8.25-8.844-14.31-8.844H153.9c-6.061 0-11.6 3.424-14.31 8.844L128 32H16c-8.836 0-16 7.162-16 16V80c0 8.836 7.164 16 16 16h416c8.838 0 16-7.164 16-16V48C448 39.16 440.8 32 432 32z",fill:"currentColor"})),Ge=a(v("react")),Ve=()=>Ge.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 512 512","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},Ge.default.createElement("path",{d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z",fill:"currentColor"})),He=a(v("react")),Je=e=>{return He.default.createElement("div",{className:"marketplace-card__authors"},e.authors.map((e,t)=>He.default.createElement("a",{title:e.name,className:"marketplace-card__author",href:e.url,draggable:"false",dir:"auto",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),key:t},e.name)))},j=a(v("react")),Qe=a=>{const[e,t]=j.default.useState(!1);var n=e=>e.reduce((e,t)=>(!a.showTags&&"external JS"!==t||e.push(j.default.createElement("li",{className:"marketplace-card__tag",draggable:!1,"data-tag":t},t)),e),[]),r=a.tags.slice(0,4),i=a.tags.slice(4);return j.default.createElement("div",{className:"marketplace-card__tags-container"},j.default.createElement("ul",{className:"marketplace-card__tags"},n(r),i.length&&e?n(i):null),i.length&&!e?j.default.createElement("button",{className:"marketplace-card__tags-more-btn",onClick:e=>{e.stopPropagation(),t(!0)}},"..."):null)},Ye=class extends A.default.Component{constructor(e){super(e),this.menuType=Spicetify.ReactComponent.Menu;var t,a="snippet"===e.type?"snippet:":`${e.item.user}/${e.item.repo}/`;let n="";"snippet"===e.type?n=e.item.title.replaceAll(" ","-"):"theme"===e.type?n=(null==(t=e.item.manifest)?void 0:t.usercss)||"":"extension"===e.type&&(n=(null==(t=e.item.manifest)?void 0:t.main)||""),this.localStorageKey="marketplace:installed:"+a+n,Object.assign(this,e),this.tags=e.item.tags||[],e.item.include&&this.tags.push("external JS"),this.state={installed:null!==localStorage.getItem(this.localStorageKey),stars:this.props.item.stars||0,tagsExpanded:!1}}isInstalled(){return null!==localStorage.getItem(this.localStorageKey)}async componentDidMount(){var e;"Installed"===this.props.CONFIG.activeTab&&this.props.CONFIG.visual.stars&&"snippet"!==this.props.type&&(e=`https://api.github.com/repos/${this.props.item.user}/`+this.props.item.repo,e=await fetch(e).then(e=>e.json()),this.state.stars!==e.stargazers_count&&this.setState({stars:e.stargazers_count},()=>{console.log(`Stars updated to: ${this.state.stars}; updating localstorage.`),this.installExtension()}))}buttonClicked(){var e,t;"extension"===this.props.type?(this.isInstalled()?(console.log("Extension already installed, removing"),this.removeExtension()):this.installExtension(),N("RELOAD")):"theme"===this.props.type?(t=(e=localStorage.getItem("marketplace:theme-installed"))?f(e,{}):{},console.log(t),console.log(e),this.isInstalled()?(console.log("Theme already installed, removing"),this.removeTheme(this.localStorageKey)):(this.removeTheme(),this.installTheme()),(null!=(e=this.props.item.manifest)&&e.include||t.include)&&N("RELOAD")):"snippet"===this.props.type?this.isInstalled()?(console.log("Snippet already installed, removing"),this.removeSnippet()):this.installSnippet():console.error("Unknown card type")}installExtension(){var e;console.log("Installing extension "+this.localStorageKey),localStorage.setItem(this.localStorageKey,JSON.stringify({manifest:null==(e=this.props.item)?void 0:e.manifest,type:this.props.type,title:this.props.item.title,subtitle:this.props.item.subtitle,authors:this.props.item.authors,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,imageURL:this.props.item.imageURL,extensionURL:this.props.item.extensionURL,readmeURL:this.props.item.readmeURL,stars:this.state.stars}));const t=f(g,[]);-1===t.indexOf(this.localStorageKey)&&(t.push(this.localStorageKey),localStorage.setItem(g,JSON.stringify(t))),console.log("Installed"),this.setState({installed:!0})}removeExtension(){if(localStorage.getItem(this.localStorageKey)){console.log("Removing extension "+this.localStorageKey),localStorage.removeItem(this.localStorageKey);const t=f(g,[]);var e=t.filter(e=>e!==this.localStorageKey);localStorage.setItem(g,JSON.stringify(e)),console.log("Removed"),this.setState({installed:!1})}}async installTheme(){var e;console.log("Installing theme "+this.localStorageKey);let t={};if(this.props.item.schemesURL){const r=await fetch(this.props.item.schemesURL);var a=await r.text();t=(e=>{const a={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},n={},t=e.split(/[\r\n]+/);let r=null;return t.forEach(function(e){var t;a.comment.test(e)||(a.param.test(e)?(t=e.match(a.param),r?n[r][t[1]]=t[2]:n[t[1]]=t[2]):a.section.test(e)?(t=e.match(a.section),n[t[1]]={},r=t[1]):0==e.length&&r&&(r=null))}),n})(a)}a=Object.keys(t)[0],console.log(t,a),a=a||null;localStorage.setItem(this.localStorageKey,JSON.stringify({manifest:null==(e=this.props.item)?void 0:e.manifest,type:this.props.type,title:this.props.item.title,subtitle:this.props.item.subtitle,authors:this.props.item.authors,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,imageURL:this.props.item.imageURL,extensionURL:this.props.item.extensionURL,readmeURL:this.props.item.readmeURL,stars:this.state.stars,tags:this.tags,cssURL:this.props.item.cssURL,schemesURL:this.props.item.schemesURL,include:this.props.item.include,schemes:t,activeScheme:a}));const n=f(b,[]);-1===n.indexOf(this.localStorageKey)&&(n.push(this.localStorageKey),localStorage.setItem(b,JSON.stringify(n)),localStorage.setItem(c,this.localStorageKey)),console.log("Installed"),this.props.item.include||(this.fetchAndInjectUserCSS(this.localStorageKey),this.props.updateActiveTheme(this.localStorageKey),this.props.updateColourSchemes(t,a)),this.setState({installed:!0})}removeTheme(t){var e=(t=t||localStorage.getItem(c))&&localStorage.getItem(t);if(t&&e){console.log("Removing theme "+t),localStorage.removeItem(t),localStorage.removeItem(c);const a=f(b,[]);e=a.filter(e=>e!==t);localStorage.setItem(b,JSON.stringify(e)),console.log("Removed"),this.fetchAndInjectUserCSS(null),this.props.updateActiveTheme(null),this.props.updateColourSchemes(null,null),this.setState({installed:!1})}}installSnippet(){console.log("Installing snippet "+this.localStorageKey),localStorage.setItem(this.localStorageKey,JSON.stringify({code:this.props.item.code,title:this.props.item.title,description:this.props.item.description,imageURL:this.props.item.imageURL}));const e=f(y,[]);-1===e.indexOf(this.localStorageKey)&&(e.push(this.localStorageKey),localStorage.setItem(y,JSON.stringify(e)));var t=e.map(e=>f(e));ie(t),this.setState({installed:!0})}removeSnippet(){localStorage.removeItem(this.localStorageKey);const e=f(y,[]),t=e.filter(e=>e!==this.localStorageKey);localStorage.setItem(y,JSON.stringify(t));var a=t.map(e=>f(e));ie(a),this.setState({installed:!1})}async fetchAndInjectUserCSS(e){try{var t=e?await(async e=>{if(!e.cssURL)throw new Error("No CSS URL provided");const t=-1<e.cssURL.indexOf("raw.githubusercontent.com")?`https://cdn.jsdelivr.net/gh/${e.user}/${e.repo}@${e.branch}/`+e.manifest.usercss:e.cssURL;var a,n=t.replace("/user.css","/assets/");console.log("Parsing CSS: ",t);let r=await fetch(t+"?time="+Date.now()).then(e=>e.text());for(const i of r.matchAll(new RegExp(`url\\(['|"](?<path>.+?)['|"]\\)`,"gm"))||[]){const o=null==(a=null==i?void 0:i.groups)?void 0:a.path;!o||o.startsWith("http")||o.startsWith("data")||(a=n+o.replace(/\.\//g,""),r=r.replace(o,a))}return r})(this.props.item):void 0;try{const a=document.querySelector("link[href='user.css']"),n=(a&&a.remove(),document.querySelector("style.marketplaceCSS.marketplaceUserCSS"));if(n&&n.remove(),t){const r=document.createElement("style");r.classList.add("marketplaceCSS"),r.classList.add("marketplaceUserCSS"),r.innerHTML=t,document.head.appendChild(r)}else{const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href","user.css"),i.classList.add("userCSS"),document.head.appendChild(i)}}catch(e){console.warn(e)}}catch(e){console.warn(e)}}openReadme(){var e;null!=(e=this.props.item)&&e.manifest&&null!=(e=null==(e=this.props.item)?void 0:e.manifest)&&e.readme?Spicetify.Platform.History.push({pathname:de+"/readme",state:{data:{title:this.props.item.title,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,readmeURL:this.props.item.readmeURL}}}):Spicetify.showNotification("No page was found")}render(){var e,t=this.isInstalled();if("Installed"===this.props.CONFIG.activeTab&&!t)return console.log("Card item not installed"),null;const a=["main-card-card","marketplace-card--"+this.props.type],n=(t&&a.push("marketplace-card--installed"),[]);return"snippet"!==this.props.type&&this.props.visual.stars&&n.push("★ "+this.state.stars),A.default.createElement("div",{className:a.join(" "),onClick:()=>{if("snippet"===this.props.type){var e=this.props.item.title.replace(/\n/g,"");if(null!=(e=f("marketplace:installed:snippet:"+e))&&e.custom)return N("EDIT_SNIPPET",void 0,void 0,this.props);N("VIEW_SNIPPET",void 0,void 0,this.props)}else this.openReadme()}},A.default.createElement("div",{className:"main-card-draggable",draggable:"true"},A.default.createElement("div",{className:"main-card-imageContainer"},A.default.createElement("div",{className:"main-cardImage-imageWrapper"},A.default.createElement("div",null,A.default.createElement("img",{alt:"","aria-hidden":"false",draggable:"false",loading:"lazy",src:this.props.item.imageURL,className:"main-image-image main-cardImage-image",onError:e=>{e.currentTarget.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII"),null!=(e=e.currentTarget.closest(".main-cardImage-imageWrapper"))&&e.classList.add("main-cardImage-imageWrapper--error")}})))),A.default.createElement("div",{className:"main-card-cardMetadata"},A.default.createElement("a",{draggable:"false",title:"snippet"===this.props.type?this.props.item.title:null==(e=this.props.item.manifest)?void 0:e.name,className:"main-cardHeader-link",dir:"auto",href:"snippet"!==this.props.type?`https://github.com/${this.props.item.user}/`+this.props.item.repo:"https://github.com/spicetify/spicetify-marketplace/blob/main/resources/snippets.json",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},A.default.createElement("div",{className:"main-cardHeader-text main-type-balladBold"},this.props.item.title)),A.default.createElement("div",{className:"main-cardSubHeader-root main-type-mestoBold marketplace-cardSubHeader"},this.props.item.authors&&A.default.createElement(Je,{authors:this.props.item.authors}),A.default.createElement("span",null,n.join(" ‒ "))),A.default.createElement("p",{className:"marketplace-card-desc"},"snippet"===this.props.type?this.props.item.description:null==(e=this.props.item.manifest)?void 0:e.description),this.tags.length?A.default.createElement("div",{className:"marketplace-card__bottom-meta main-type-mestoBold"},A.default.createElement(Qe,{tags:this.tags,showTags:this.props.CONFIG.visual.tags})):null,t&&A.default.createElement("div",{className:"marketplace-card__bottom-meta main-type-mestoBold"},"✓ Installed"),A.default.createElement("div",{className:"main-card-PlayButtonContainer"},A.default.createElement(w,{classes:["marketplace-installButton"],type:"circle",label:t?"Remove":"Save",onClick:e=>{e.stopPropagation(),this.buttonClicked()}},t?A.default.createElement(ze,null):A.default.createElement(Ve,null))))))}},Xe=class extends s.default.Component{constructor(e){super(e),this.endOfList=!1,this.lastScroll=0,this.requestQueue=[],this.requestPage=0,this.cardList=[],Object.assign(this,e),this.updateAppConfig=e.updateAppConfig.bind(this),this.sortConfig={by:f(ue,"top")},this.state={searchValue:"",cards:[],tabs:e.CONFIG.tabs,rest:!0,endOfList:!1,schemes:e.CONFIG.theme.schemes,activeScheme:e.CONFIG.theme.activeScheme,activeThemeKey:e.CONFIG.theme.activeThemeKey}}getInstalledTheme(){var e=localStorage.getItem(c);if(!e)return null;e=localStorage.getItem(e);return e?JSON.parse(e):null}newRequest(e,t){this.cardList=[];var a=[];this.requestQueue.unshift(a),this.loadAmount(a,e,t)}appendCard(e,t){e=s.default.createElement(Ye,{item:e,key:this.props.CONFIG.activeTab+":"+e.title,CONFIG:this.CONFIG,visual:this.props.CONFIG.visual,type:t,activeThemeKey:this.state.activeThemeKey,updateColourSchemes:this.updateColourSchemes.bind(this),updateActiveTheme:this.setActiveTheme.bind(this)});this.cardList.push(e),this.setState({cards:this.cardList})}updateSort(e){e&&(this.sortConfig.by=e,localStorage.setItem(ue,e)),this.requestPage=0,this.cardList=[],this.setState({cards:[],rest:!1,endOfList:!1}),this.endOfList=!1,this.newRequest(S)}updateTabs(){this.setState({tabs:[...this.props.CONFIG.tabs]})}updatePostsVisual(){this.cardList=this.cardList.map((e,t)=>s.default.createElement(Ye,h(m({},e.props),{key:t.toString(),CONFIG:this.CONFIG}))),this.setState({cards:[...this.cardList]})}switchTo(e){this.CONFIG.activeTab=e,localStorage.setItem(ce,e),this.cardList=[],this.requestPage=0,this.setState({cards:[],rest:!1,endOfList:!1}),this.endOfList=!1,this.newRequest(S)}async loadPage(t,e){switch(this.CONFIG.activeTab){case"Extensions":var a=await async function(e=1,t=[],a){let n=a?`https://api.github.com/search/repositories?q=${encodeURIComponent(a+"+topic:spicetify-extensions")}&per_page=100`:`https://api.github.com/search/repositories?q=${encodeURIComponent("topic:spicetify-extensions")}&per_page=100`;e&&(n+="&page="+e);const r=await fetch(n).then(e=>e.json()).catch(()=>[]);return r.items||Spicetify.showNotification("Too Many Requests, Cool Down."),h(m({},r),{page_count:r.items.length,items:r.items.filter(e=>!t.includes(e.html_url))})}(this.requestPage,this.BLACKLIST,e);for(const o of a.items){const s=await async function(t,n,r,i=!1){try{let e;var a=t.match(new RegExp("https:\\/\\/api\\.github\\.com\\/repos\\/(?<user>.+)\\/(?<repo>.+)\\/contents"));if(!a||!a.groups)return null;const{user:o,repo:s}=a.groups;return e=await Pe(o,s,n),(e=Array.isArray(e)?e:[e]).reduce((e,t)=>{var a=t.branch||n,a={manifest:t,title:t.name,subtitle:t.description,authors:oe(t.authors,o),user:o,repo:s,branch:a,imageURL:t.preview&&t.preview.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${o}/${s}/${a}/`+t.preview,extensionURL:t.main.startsWith("http")?t.main:`https://raw.githubusercontent.com/${o}/${s}/${a}/`+t.main,readmeURL:t.readme&&t.readme.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${o}/${s}/${a}/`+t.readme,stars:r,tags:t.tags};return t&&t.name&&t.description&&t.main&&(i&&localStorage.getItem(`marketplace:installed:${o}/${s}/`+t.main)||e.push(a)),e},[])}catch(e){return null}}(o.contents_url,o.default_branch,o.stargazers_count,this.CONFIG.visual.hideInstalled);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;s&&s.length&&s.forEach(e=>this.appendCard(e,"extension"))}var n=-1<this.requestPage&&this.requestPage?this.requestPage:1,r=S*(n-1)+a.page_count,i=a.total_count-r;if(console.log(`Parsed ${r}/${a.total_count} extensions`),0<i)return n+1;console.log("No more extension results");break;case"Installed":{const l={theme:f(b,[]),extension:f(g,[]),snippet:f(y,[])};for(const c in l)l[c].length&&l[c].forEach(async e=>{e=f(e);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;this.appendCard(e,c)});break}case"Themes":r=await async function(e=1,t=[],a){let n=a?`https://api.github.com/search/repositories?q=${encodeURIComponent(a+"+topic:spicetify-extensions")}&per_page=100`:`https://api.github.com/search/repositories?q=${encodeURIComponent("topic:spicetify-themes")}&per_page=100`;e&&(n+="&page="+e);const r=await fetch(n).then(e=>e.json()).catch(()=>[]);return r.items||Spicetify.showNotification("Too Many Requests, Cool Down."),h(m({},r),{page_count:r.items.length,items:r.items.filter(e=>!t.includes(e.html_url))})}(this.requestPage,this.BLACKLIST,e);for(const u of r.items){const p=await async function(t,n,r){try{let e;var a=t.match(new RegExp("https:\\/\\/api\\.github\\.com\\/repos\\/(?<user>.+)\\/(?<repo>.+)\\/contents"));if(!a||!a.groups)return null;const{user:i,repo:o}=a.groups;return e=await Pe(i,o,n),(e=Array.isArray(e)?e:[e]).reduce((e,t)=>{var a=t.branch||n,a={manifest:t,title:t.name,subtitle:t.description,authors:oe(t.authors,i),user:i,repo:o,branch:a,imageURL:t.preview&&t.preview.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.preview,readmeURL:t.readme&&t.readme.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.readme,stars:r,tags:t.tags,cssURL:t.usercss.startsWith("http")?t.usercss:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.usercss,schemesURL:t.schemes?t.schemes.startsWith("http")?t.schemes:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.schemes:null,include:t.include};return null!=t&&t.name&&null!=t&&t.usercss&&null!=t&&t.description&&e.push(a),e},[])}catch(e){return null}}(u.contents_url,u.default_branch,u.stargazers_count);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;p&&p.length&&p.forEach(e=>this.appendCard(e,"theme"))}a=-1<this.requestPage&&this.requestPage?this.requestPage:1,i=S*(a-1)+r.page_count,n=r.total_count-i;if(console.log(`Parsed ${i}/${r.total_count} themes`),0<n)return a+1;console.log("No more theme results");break;case"Snippets":{const d=await(async()=>{const e=Ie;if(e)return e.reduce((e,t)=>{const a=m({},t);return a.preview&&(a.imageURL=a.preview&&a.preview.startsWith("http")?a.preview:"https://raw.githubusercontent.com/spicetify/spicetify-marketplace/main/"+a.preview,delete a.preview),e.push(a),e},[])})();if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;d&&d.length&&d.forEach(e=>this.appendCard(e,"snippet"))}}return this.setState({rest:!0,endOfList:!0}),this.endOfList=!0,0}async loadAmount(t,e=S,a){for(this.setState({rest:!1}),e+=this.cardList.length,this.requestPage=await this.loadPage(t,a);this.requestPage&&-1!==this.requestPage&&this.cardList.length<e&&!this.state.endOfList;)this.requestPage=await this.loadPage(t,a);-1===this.requestPage?this.requestQueue=this.requestQueue.filter(e=>e!==t):(this.requestQueue.shift(),this.setState({rest:!0}))}loadMore(){this.state.rest&&!this.endOfList&&this.loadAmount(this.requestQueue[0],S)}updateColourSchemes(e,t){console.log("updateColourSchemes",e,t),this.CONFIG.theme.schemes=e,this.CONFIG.theme.activeScheme=t,e&&t&&e[t]?le(null==(a=this.CONFIG.theme.schemes)?void 0:a[t]):le(null);var a=f(c);const n=f(a);n?(n.activeScheme=t,console.log(n),localStorage.setItem(a,JSON.stringify(n))):console.log("No installed theme data"),this.setState({schemes:e,activeScheme:t})}async componentDidMount(){this.gridUpdateTabs=this.updateTabs.bind(this),this.gridUpdatePostsVisual=this.updatePostsVisual.bind(this);const e=document.querySelector(".os-viewport");this.checkScroll=this.isScrolledBottom.bind(this),e&&(e.addEventListener("scroll",this.checkScroll),this.cardList.length)?0<this.lastScroll&&e.scrollTo(0,this.lastScroll):(this.BLACKLIST=await(await fetch("https://raw.githubusercontent.com/spicetify/spicetify-marketplace/main/resources/blacklist.json").then(e=>e.json()).catch(()=>({}))).repos,this.newRequest(S))}componentWillUnmount(){this.gridUpdateTabs=this.gridUpdatePostsVisual=null;const e=document.querySelector(".os-viewport");e&&(this.lastScroll=e.scrollTop,e.removeEventListener("scroll",this.checkScroll))}isScrolledBottom(e){e=e.target;e.scrollTop+e.clientHeight>=e.scrollHeight&&this.loadMore()}setActiveTheme(e){this.CONFIG.theme.activeThemeKey=e,this.setState({activeThemeKey:e})}getActiveScheme(){return this.state.activeScheme}render(){return s.default.createElement("section",{className:"contentSpacing"},s.default.createElement("div",{className:"marketplace-header"},s.default.createElement("h1",null,this.props.title),s.default.createElement("div",{className:"marketplace-header__right"},this.state.activeScheme?s.default.createElement(Fe,{onChange:e=>this.updateColourSchemes(this.state.schemes,e),sortBoxOptions:(e=this.state.schemes)?Object.keys(e).map(e=>({key:e,value:e})):[],sortBySelectedFn:e=>e.key===this.getActiveScheme()}):null,s.default.createElement("button",{type:"button",title:"Settings",className:"marketplace-settings-button",id:"marketplace-settings-button",onClick:()=>N("SETTINGS",this.CONFIG,this.updateAppConfig)},s.default.createElement(je,null)))),s.default.createElement("div",{className:"searchbar--bar__wrapper"},s.default.createElement("input",{className:"searchbar-bar",type:"text",placeholder:`Search ${this.CONFIG.activeTab}...`,value:this.state.searchValue,onChange:e=>{this.setState({searchValue:e.target.value})},onKeyDown:e=>{"Enter"===e.key?(this.setState({endOfList:!1}),this.newRequest(S,this.state.searchValue.trim().toLowerCase()),this.searchRequested=!0):"Backspace"!==e.key&&"Delete"!==e.key||!this.searchRequested||""!==this.state.searchValue.trim()||(this.setState({endOfList:!1}),this.newRequest(S,this.state.searchValue.trim().toLowerCase()),this.searchRequested=!1)}})),[{handle:"extension",name:"Extensions"},{handle:"theme",name:"Themes"},{handle:"snippet",name:"Snippets"}].map(t=>{var e=this.cardList.filter(e=>e.props.type===t.handle).filter(e=>{const t=this.state["searchValue"],{title:a,user:n}=e.props.item;if(""===t.trim()||a.toLowerCase().includes(t.trim().toLowerCase())||null!=n&&n.toLowerCase().includes(t.trim().toLowerCase()))return e}).map(e=>{return s.default.cloneElement(e,{activeThemeKey:this.state.activeThemeKey})});return e.length?s.default.createElement(s.default.Fragment,null,s.default.createElement("h2",{className:"marketplace-card-type-heading"},t.name),s.default.createElement("div",{className:"marketplace-grid main-gridContainer-gridContainer main-gridContainer-fixedWidth","data-tab":this.CONFIG.activeTab,"data-card-type":t.name},e)):null}),"Snippets"===this.CONFIG.activeTab?s.default.createElement(w,{classes:["marketplace-add-snippet-btn"],onClick:()=>N("ADD_SNIPPET")},"+Add CSS"):null,s.default.createElement("footer",{className:"marketplace-footer"},!this.state.endOfList&&(this.state.rest?s.default.createElement(Le,{onClick:this.loadMore.bind(this)}):s.default.createElement(Te,null))),s.default.createElement(Ue,{switchCallback:this.switchTo.bind(this),links:this.CONFIG.tabs,activeLink:this.CONFIG.activeTab}));var e}},R=a(v("react")),Ze=class extends R.default.Component{constructor(){super(...arguments),this.state={html:"<p>Loading...</p>"}}async getReadmeHTML(){try{const a=await fetch(this.props.data.readmeURL);if(!a.ok)throw Spicetify.showNotification(`Error loading README (HTTP ${a.status})`);var e={text:await a.text(),context:this.props.data.user+"/"+this.props.data.repo,mode:"gfm"};const n=await fetch("https://api.github.com/markdown",{method:"POST",body:JSON.stringify(e)});if(!n.ok)throw Spicetify.showNotification(`Error parsing README (HTTP ${n.status})`);var t=await n.text();return null==t&&Spicetify.Platform.History.goBack(),t}catch(e){return Spicetify.Platform.History.goBack(),null}}componentDidMount(){this.getReadmeHTML().then(e=>{null!=e&&this.setState({html:e})})}componentDidUpdate(){var e;const t=null==(e=document.querySelector("#marketplace-readme"))?void 0:e.closest("main");t&&setTimeout(()=>{t.style.overflowY="auto"},1e3),document.querySelectorAll("#marketplace-readme img").forEach(e=>{e.addEventListener("error",e=>{const t=e.target;e=t.getAttribute("src"),e=`https://raw.githubusercontent.com/${this.props.data.user}/${this.props.data.repo}/${this.props.data.branch}/`+e;t.setAttribute("src",e)},{once:!0})})}render(){return R.default.createElement("section",{className:"contentSpacing"},R.default.createElement("div",{className:"marketplace-header"},R.default.createElement("h1",null,this.props.title)),"<p>Loading...</p>"===this.state.html?R.default.createElement("footer",{className:"marketplace-footer"},R.default.createElement(Te,null)):R.default.createElement("div",{id:"marketplace-readme",className:"marketplace-readme__container",dangerouslySetInnerHTML:{__html:this.state.html}}))}},et=class extends o.default.Component{constructor(e){super(e),this.state={count:0,CONFIG:{}},this.updateConfig=e=>{this.CONFIG=m({},e),console.log("updated config",this.CONFIG),this.setState({CONFIG:m({},e)})};e=f(l,null);let t=[];try{if(t=JSON.parse(e),!Array.isArray(t))throw new Error("Could not parse marketplace tabs key");if(0===t.length)throw new Error("Empty marketplace tabs key");if(0<t.filter(e=>!e).length)throw new Error("Falsey marketplace tabs key")}catch(e){t=pe,localStorage.setItem(l,JSON.stringify(t))}let a={},n=null;try{var r=f(c,null);if(r){var i=f(r,null);if(!i)throw new Error("No installed theme data");a=i.schemes,n=i.activeScheme}else console.log("No theme set as installed")}catch(e){console.error(e)}this.CONFIG={visual:{stars:JSON.parse(f("marketplace:stars",!0)),tags:JSON.parse(f("marketplace:tags",!0)),hideInstalled:JSON.parse(f("marketplace:hideInstalled",!1)),colorShift:JSON.parse(f("marketplace:colorShift",!1)),type:JSON.parse(f("marketplace:type",!1)),followers:JSON.parse(f("marketplace:followers",!1))},tabs:t,activeTab:f(ce,t[0]),theme:{activeThemeKey:f(c,null),schemes:a,activeScheme:n}},this.CONFIG.activeTab&&this.CONFIG.tabs.filter(e=>e.name===this.CONFIG.activeTab).length||(this.CONFIG.activeTab=this.CONFIG.tabs[0].name)}render(){var e=Spicetify.Platform.History["location"];return e.pathname===de+"/readme"?o.default.createElement(Ze,{title:"Spicetify Marketplace - Readme",data:e.state.data}):o.default.createElement(Xe,{title:"Spicetify Marketplace",CONFIG:this.CONFIG,updateAppConfig:this.updateConfig})}},tt=a(v("react"));return r=ae,G(i({},"__esModule",{value:!0}),r)})();const render=()=>marketplace.default();